# ops/config.yaml -- Knowledge system configuration
#
# This file controls how the arscontexta knowledge processing layer and
# co-scientist pipeline behave. Edit values here to tune your system.
#
# For WHY each dimension was chosen, see: ops/derivation.md
# For all valid values and detailed descriptions, see: ops/config-reference.yaml
# For daemon-specific settings, see: ops/daemon-config.yaml

# ---------------------------------------------------------------------------
# Knowledge Architecture Dimensions
# These define the structural properties of your vault. Changing a dimension
# after the vault has content may require /refactor to restructure.
# ---------------------------------------------------------------------------
dimensions:
  granularity: atomic       # atomic: one claim per file (recommended)
                            # composite: multiple claims per file (not recommended)

  organization: flat        # flat: notes/ is a single flat directory, no subdirs
                            # hierarchical: notes organized in topic subdirectories

  linking: explicit+implicit  # explicit: wiki links only where you place them
                              # implicit: auto-suggested links from content similarity
                              # explicit+implicit: both (recommended for heavy processing)

  processing: heavy         # heavy: full reduce+reflect+reweave+verify pipeline
                            # light: reduce only, minimal connection-finding

  navigation: 3-tier        # 3-tier: Hub > Domain map > Topic map (recommended)
                            # 2-tier: Hub > Topic map
                            # flat: no navigation hierarchy

  maintenance: condition-based  # condition-based: triggered by thresholds (10+ obs, etc.)
                                # scheduled: periodic regardless of thresholds
                                # manual: only when you ask

  schema: moderate          # moderate: required fields enforced, optional fields suggested
                            # strict: all fields required, validation blocks writes
                            # minimal: only description required

  automation: full          # full: daemon + hooks + auto-commit (recommended)
                            # partial: hooks only, no daemon
                            # manual: no automation

# ---------------------------------------------------------------------------
# Feature Flags
# ---------------------------------------------------------------------------
features:
  semantic-search: true     # Enable semantic similarity for /reflect connections
  processing-pipeline: true # Enable the reduce->reflect->reweave->verify pipeline

# ---------------------------------------------------------------------------
# Processing Configuration
# Controls how /reduce, /reflect, /reweave, and /verify behave.
# ---------------------------------------------------------------------------
processing_tier: auto       # auto: depth adapts to source complexity
                            # fixed: always use the depth setting below

processing:
  depth: standard           # deep: exhaustive extraction, all claims
                            # standard: comprehensive but selective (recommended)
                            # quick: key claims only, fast processing

  chaining: suggested       # manual: each pipeline phase requires explicit command
                            # suggested: agent suggests next phase, you approve
                            # automatic: phases chain without approval

  extraction:
    selectivity: moderate   # strict: only high-confidence, well-sourced claims
                            # moderate: reasonable claims with clear provenance
                            # permissive: extract broadly, filter later

    categories: auto        # auto: categories derived from ops/derivation.md
                            # Or provide a YAML list of allowed claim types

  verification:
    description_test: true  # Verify descriptions add info beyond the title
    schema_check: true      # Validate frontmatter against templates
    link_check: true        # Check for dangling wiki links

  reweave:
    scope: related          # related: only notes in the same topic map
                            # broad: notes within 2 hops in the graph
                            # full: all notes (expensive, use sparingly)

    frequency: after_create # after_create: reweave after every /reduce
                            # periodic: reweave on a schedule (daemon handles)
                            # manual: only when you run /reweave

# ---------------------------------------------------------------------------
# Provenance Tracking
# ---------------------------------------------------------------------------
provenance: full            # full: record source query, inbox path, processing chain
                            # minimal: record source only
                            # off: no provenance tracking

# ---------------------------------------------------------------------------
# Agent Personality (experimental)
# ---------------------------------------------------------------------------
personality:
  enabled: false            # true: agent uses a distinctive communication style
                            # false: neutral, professional tone (recommended)

# ---------------------------------------------------------------------------
# Research Tool Configuration
# Controls which search backends /learn and /literature use.
# ---------------------------------------------------------------------------
research:
  primary: web-search       # Primary search tool: web-search | exa | pubmed
  fallback: web-search      # Fallback if primary fails
  last_resort: web-search   # Last resort search
  default_depth: moderate   # light: 1-2 sources | moderate: 3-5 | deep: 5-10

# ---------------------------------------------------------------------------
# Co-Scientist Automation Toggles
# These control hooks and automated behaviors.
# ---------------------------------------------------------------------------
vault_root: .               # Vault root relative to repo root
                            # Override with VAULT_PATH env var or vault registry

git_auto_commit: true       # Auto-commit vault changes after note writes
schema_validation: true     # Validate note schema on Write/Edit hooks
session_capture: true       # Save session metadata to ops/sessions/

# ---------------------------------------------------------------------------
# Health Check Scope
# Controls which directories /health scans. Must match the knowledge graph
# boundaries -- operational artifacts (ops/, .claude/) are not graph nodes.
# Canonical reference: ops/scripts/dangling-links.sh
# ---------------------------------------------------------------------------
health:
  # Directories containing graph content (wiki links checked here)
  graph_directories:
    - notes
    - _research
    - self
    - projects

  # Directories excluded from all scans (artifacts, templates, infrastructure)
  exclude_directories:
    - ops
    - .claude
    - _code/templates
    - _dev
    - docs
    - inbox/archive

  # Topics field convention: "body" means check for a Topics: markdown section,
  # not a topics: YAML frontmatter field. Matches _code/templates/claim-note.md.
  topics_convention: body    # body: Topics: section in markdown body (current)
                             # yaml: topics: field in YAML frontmatter
